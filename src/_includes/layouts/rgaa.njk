{% include "components/header.njk" %}
<style>
li {list-style-type: none;}
.annexes li { list-style-type: inherit; }
.annexes { padding: 1rem 2rem; background-color: aliceblue;}
.fr-collapse--expanded { background-color: lemonchiffon; }
.fr-accordion__btn {
    background-color: transparent;
    border-bottom: 0.3em solid aliceblue;
}
</style>
<main role="main">
	<div class="fr-container fr-mt-4w fr-mb-4w">
    	<div class="fr-grid-row fr-grid-row--gutters fr-grid-row--center">
    		<div class="fr-col-8">
				<h1>{{ title }}</h1>
				{{ content | safe }}

				{% set curThemeNum = 0 %}
				{% for c in collections.criteriaAndTests %}
					{% set crit = c.criterion %}
					{% set critNum = c.critNum %}
					{% set themeNum = c.themeNum %}
					{% set tests = c.tests %}
					{% set annexeCrit = c.annexeCrit %}
					{% if themeNum > 1 and themeNum !== curThemeNum %}
						</ul>
					{% endif %}

					{% if themeNum !== curThemeNum %}
						{% set curThemeNum = themeNum %}
						<h2 id="{{ themeNum }}">{{ themeNum }}.&nbsp;{{ themes[themeNum].title }} <!--a class="direct-link" href="#{{ themeNum }}">#</a--></h2>
						<ul>
					{% endif %}

					<li><!--a class="direct-link" href="#{{ critNum }}">#</a-->
						<h3 class="fr-accordion__title" id="{{ critNum }}"><button aria-expanded="false" aria-controls="fr-{{ critNum }}" class=" fr-accordion__btn"><div>{{ critNum }}. {{ crit.data.title | markdownInline | safe }}</div></button></h3>
						<div id="fr-{{ critNum }}" class="fr-collapse">
						<div class="fr-accordion__inner">
						<ul>
						{% for t in tests %}
							<li id="{{ t.testSlug }}">
								<h4 class="fr-h6">Test {{ t.testFullNum }} <!--a class="direct-link" href="#{{ t.testSlug }}">#</a--></h4>
								{{ t.test.templateContent | safe }}
							</li>
						{% endfor %}
						</ul>
						<div class="annexes">
							{{ annexeCrit.templateContent  | safe}}
							<h4>Références</h4>
							{% if annexeCrit.data.WCAG != null %}
								<h5>WCAG</h5>
								<p>{{ annexeCrit.data.WCAG}}</p>
							{% endif %}
							{% if annexeCrit.data.Techniques != null %}
								<h5>Techniques</h5>
								<p>{{ annexeCrit.data.Techniques}}</p>
							{% endif %}
						</div>
						</div>
						</div>
					</li>
				{% endfor %}
				</ul>
			</div>
		</div>
	</div>
</main>
{% include "components/footer.njk" %}




